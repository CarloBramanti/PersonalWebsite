<!DOCTYPE html>
<html>
    <head>
        <title>Prova Loop</title>
    </head>
    <body>
        <div id="image-loop" style="width: 300px; height: 300px; border-style:solid; border-color: red;"></div>

        <script>
        const loopContainer = document.getElementById('image-loop');

        const totalFrames = 3;
        const frameDuration = 1000; // millisecondi tra un frame e lâ€™altro

        let currentFrame = 1;
        let isHovering = false;
        let intervalId = null;

        function updateFrame() {
            if (!isHovering) {
            loopContainer.style.backgroundImage = `url('frames/frame${currentFrame}.png')`;
            currentFrame = (currentFrame % totalFrames) + 1;
            }
        }

        function startLoop() {
            intervalId = setInterval(updateFrame, frameDuration);
        }

        function stopLoop() {
            clearInterval(intervalId);
        }

        loopContainer.addEventListener('mouseenter', () => {
            isHovering = true;
            stopLoop();
            const coloredFrame = currentFrame === 1 ? totalFrames : currentFrame - 1;
            loopContainer.style.backgroundImage = `url('frames/frame${coloredFrame}_color.png')`;
        });

      loopContainer.addEventListener('mouseleave', () => {
  isHovering = false;

  // Mostra subito il frame attuale in bianco e nero
  const visibleFrame = currentFrame === 1 ? totalFrames : currentFrame - 1;
  loopContainer.style.backgroundImage = `url('frames/frame${visibleFrame}.png')`;

  // Aspetta un tick (opzionale) e poi riparte il loop
  clearInterval(intervalId);
  intervalId = setInterval(updateFrame, frameDuration);
});

        // Inizializza loop
        startLoop();
        </script>

        <style>
        #image-loop {
            background-size: cover;
            background-position: center;
            transition: background-image 0.2s ease;
        }
        </style>
    </body>
</html>